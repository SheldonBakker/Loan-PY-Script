{"timestamp": "2025-03-06 14:42:44,306", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:44,708", "level": "INFO", "logger": "root", "message": "Performing initial database connection check...", "module": "loans", "function": "run_cli", "line": 1426, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:45,597", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:45,600", "level": "INFO", "logger": "root", "message": "Database connection test successful. Found 2 loans.", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loans", "record_count": 2}
{"timestamp": "2025-03-06 14:42:45,906", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/clients?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:45,908", "level": "INFO", "logger": "root", "message": "Clients table accessible. Found 1047 clients.", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "clients", "record_count": 1047}
{"timestamp": "2025-03-06 14:42:46,211", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:46,212", "level": "INFO", "logger": "root", "message": "Loan payments table accessible. Found 2 payment records.", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loan_payments", "record_count": 2}
{"timestamp": "2025-03-06 14:42:46,417", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/gun_licences?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:46,419", "level": "INFO", "logger": "root", "message": "Gun licences table accessible. Found 367 licence records.", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "gun_licences", "record_count": 367}
{"timestamp": "2025-03-06 14:42:46,421", "level": "INFO", "logger": "root", "message": "Starting loan payment notification process at 2025-03-06 14:42:46", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "main", "test_mode": false, "send_emails": true, "send_admin_summary": false, "start_time": "2025-03-06T14:42:46.420885"}
{"timestamp": "2025-03-06 14:42:46,724", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:46,727", "level": "INFO", "logger": "root", "message": "Supabase connection test successful", "module": "loans", "function": "main", "line": 501, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:46,729", "level": "INFO", "logger": "root", "message": "Running update_overdue_loans at 2025-03-06 14:42:46", "module": "loans", "function": "update_overdue_loans", "line": 695, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,028", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cpayment_due_date%2Cclient_id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance&status=eq.active&payment_due_date=lt.2025-03-06T14%3A42%3A46.729129 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,029", "level": "INFO", "logger": "root", "message": "Found 1 potentially overdue loans", "module": "loans", "function": "update_overdue_loans", "line": 716, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,235", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=payment_date%2Camount&loan_id=eq.4ac76296-f59f-460c-8255-e78a0f9452b1&payment_date=gte.2025-03-01T00%3A00%3A00&payment_date=lte.2025-03-06T14%3A42%3A46.729129 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,237", "level": "INFO", "logger": "root", "message": "Skipping overdue status for loan 586 as sufficient payments (R 4300.00) were made this month (expected: R 2666.67)", "module": "loans", "function": "update_overdue_loans", "line": 782, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,237", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status, skipped 1 loans with sufficient payments, encountered 0 errors", "module": "loans", "function": "update_overdue_loans", "line": 834, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,238", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status", "module": "loans", "function": "main", "line": 509, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,441", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,446", "level": "INFO", "logger": "root", "message": "Found 2 loans in the database", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_loans_table", "record_count": 2}
{"timestamp": "2025-03-06 14:42:47,447", "level": "INFO", "logger": "root", "message": "Today is not the 22nd day of the month. Use --test to run anyway. Exiting.", "module": "loans", "function": "main", "line": 557, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,447", "level": "INFO", "logger": "root", "message": "Loan payment notification process completed at 2025-03-06 14:42:47", "module": "loans", "function": "main", "line": 678, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,448", "level": "INFO", "logger": "root", "message": "Total execution time: 1.03 seconds", "module": "loans", "function": "main", "line": 679, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,448", "level": "INFO", "logger": "root", "message": "Summary: 0 loans processed, 0 successful notifications, 0 loans marked as overdue, 0 penalties applied", "module": "loans", "function": "main", "line": 680, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:42:47,448", "level": "INFO", "logger": "root", "message": "Reminders: 0 payment reminders, 0 due date reminders, 0 overdue notifications", "module": "loans", "function": "main", "line": 681, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "5006a2bd-9103-4ad2-9786-c33accdae9f0", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:44:37,056", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "82776cbd-f9f8-45ef-8eb4-610d1a550315", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:44:37,459", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:44:37,460", "level": "INFO", "logger": "root", "message": "Basic log message", "module": "test_structured_logging", "function": "test_structured_logging", "line": 23, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06T14:44:37.460545", "level": "INFO", "logger": "root", "message": "Structured log message with context", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "test_logging", "test_id": "TEST-001"}
{"timestamp": "2025-03-06 14:44:37,461", "level": "ERROR", "logger": "root", "message": "Error occurred: division by zero", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "test_error_logging", "error_type": "ZeroDivisionError", "error": "division by zero"}
{"timestamp": "2025-03-06 14:44:37,461", "level": "INFO", "logger": "root", "message": "Database query completed", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "db_query", "table": "loans", "record_count": 42, "query_duration_ms": 15}
{"timestamp": "2025-03-06 14:44:37,461", "level": "INFO", "logger": "root", "message": "Email sent successfully", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "e4b02d8b-faaa-4116-9ec9-9bacec836d12", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "send_email", "recipient": "test@example.com", "subject": "Test Email", "email_size": 1024}
{"timestamp": "2025-03-06 14:57:36,496", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "64bb0f5e-695b-4a03-83af-2487a69c8101", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:57:36,882", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 14:57:36,882", "level": "INFO", "logger": "root", "message": "Basic log message", "module": "test_structured_logging", "function": "test_structured_logging", "line": 23, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06T14:57:36.883304", "level": "INFO", "logger": "root", "message": "Structured log message with context", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "test_logging", "test_id": "TEST-001"}
{"timestamp": "2025-03-06 14:57:36,883", "level": "ERROR", "logger": "root", "message": "Error occurred: division by zero", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "test_error_logging", "error_type": "ZeroDivisionError", "error": "division by zero"}
{"timestamp": "2025-03-06 14:57:36,883", "level": "INFO", "logger": "root", "message": "Database query completed", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "db_query", "table": "loans", "record_count": 42, "query_duration_ms": 15}
{"timestamp": "2025-03-06 14:57:36,884", "level": "INFO", "logger": "root", "message": "Email sent successfully", "module": "loans", "function": "log_with_context", "line": 105, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "ae0f62cb-777a-46c7-af3b-3773ad08ba28", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "send_email", "recipient": "test@example.com", "subject": "Test Email", "email_size": 1024}
{"timestamp": "2025-03-06 16:56:51,630", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 113, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "0e84b9c1-705a-4d7e-9f2e-ee4480deab2d", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:41,376", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 115, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:41,912", "level": "INFO", "logger": "root", "message": "Performing initial database connection check...", "module": "loans", "function": "run_cli", "line": 1428, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:43,196", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:43,200", "level": "INFO", "logger": "root", "message": "Database connection test successful. Found 2 loans.", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loans", "record_count": 2}
{"timestamp": "2025-03-06 16:58:43,414", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/clients?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:43,416", "level": "INFO", "logger": "root", "message": "Clients table accessible. Found 1047 clients.", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "clients", "record_count": 1047}
{"timestamp": "2025-03-06 16:58:43,922", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:43,923", "level": "INFO", "logger": "root", "message": "Loan payments table accessible. Found 2 payment records.", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loan_payments", "record_count": 2}
{"timestamp": "2025-03-06 16:58:44,415", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/gun_licences?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,416", "level": "INFO", "logger": "root", "message": "Gun licences table accessible. Found 367 licence records.", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "gun_licences", "record_count": 367}
{"timestamp": "2025-03-06 16:58:44,417", "level": "INFO", "logger": "root", "message": "Starting loan payment notification process at 2025-03-06 16:58:44", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "main", "test_mode": false, "send_emails": true, "send_admin_summary": false, "start_time": "2025-03-06T16:58:44.417069"}
{"timestamp": "2025-03-06 16:58:44,600", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,601", "level": "INFO", "logger": "root", "message": "Supabase connection test successful", "module": "loans", "function": "main", "line": 503, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,602", "level": "INFO", "logger": "root", "message": "Running update_overdue_loans at 2025-03-06 16:58:44", "module": "loans", "function": "update_overdue_loans", "line": 697, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,792", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cpayment_due_date%2Cclient_id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance&status=eq.active&payment_due_date=lt.2025-03-06T16%3A58%3A44.602132 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,793", "level": "INFO", "logger": "root", "message": "Found 1 potentially overdue loans", "module": "loans", "function": "update_overdue_loans", "line": 718, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,994", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=payment_date%2Camount&loan_id=eq.4ac76296-f59f-460c-8255-e78a0f9452b1&payment_date=gte.2025-03-01T00%3A00%3A00&payment_date=lte.2025-03-06T16%3A58%3A44.602132 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,996", "level": "INFO", "logger": "root", "message": "Skipping overdue status for loan 586 as sufficient payments (R 4300.00) were made this month (expected: R 2666.67)", "module": "loans", "function": "update_overdue_loans", "line": 784, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,997", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status, skipped 1 loans with sufficient payments, encountered 0 errors", "module": "loans", "function": "update_overdue_loans", "line": 836, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:44,998", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status", "module": "loans", "function": "main", "line": 511, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,183", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,185", "level": "INFO", "logger": "root", "message": "Found 2 loans in the database", "module": "loans", "function": "log_with_context", "line": 107, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_loans_table", "record_count": 2}
{"timestamp": "2025-03-06 16:58:45,186", "level": "INFO", "logger": "root", "message": "Today is not the 22nd day of the month. Use --test to run anyway. Exiting.", "module": "loans", "function": "main", "line": 559, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,187", "level": "INFO", "logger": "root", "message": "Loan payment notification process completed at 2025-03-06 16:58:45", "module": "loans", "function": "main", "line": 680, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,188", "level": "INFO", "logger": "root", "message": "Total execution time: 0.77 seconds", "module": "loans", "function": "main", "line": 681, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,189", "level": "INFO", "logger": "root", "message": "Summary: 0 loans processed, 0 successful notifications, 0 loans marked as overdue, 0 penalties applied", "module": "loans", "function": "main", "line": 682, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 16:58:45,190", "level": "INFO", "logger": "root", "message": "Reminders: 0 payment reminders, 0 due date reminders, 0 overdue notifications", "module": "loans", "function": "main", "line": 683, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "1cbc94b4-e645-49a5-b14d-18b4b4d47c68", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:52,491", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 110, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:52,861", "level": "INFO", "logger": "root", "message": "Performing initial database connection check...", "module": "loans", "function": "run_cli", "line": 1423, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:53,998", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,006", "level": "INFO", "logger": "root", "message": "Database connection test successful. Found 2 loans.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loans", "record_count": 2}
{"timestamp": "2025-03-06 17:00:54,201", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/clients?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,203", "level": "INFO", "logger": "root", "message": "Clients table accessible. Found 1047 clients.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "clients", "record_count": 1047}
{"timestamp": "2025-03-06 17:00:54,394", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,396", "level": "INFO", "logger": "root", "message": "Loan payments table accessible. Found 2 payment records.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loan_payments", "record_count": 2}
{"timestamp": "2025-03-06 17:00:54,596", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/gun_licences?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,598", "level": "INFO", "logger": "root", "message": "Gun licences table accessible. Found 367 licence records.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "gun_licences", "record_count": 367}
{"timestamp": "2025-03-06 17:00:54,600", "level": "INFO", "logger": "root", "message": "Starting loan payment notification process at 2025-03-06 17:00:54", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "main", "test_mode": false, "send_emails": true, "send_admin_summary": false, "start_time": "2025-03-06T17:00:54.600023"}
{"timestamp": "2025-03-06 17:00:54,790", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,793", "level": "INFO", "logger": "root", "message": "Supabase connection test successful", "module": "loans", "function": "main", "line": 498, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:54,794", "level": "INFO", "logger": "root", "message": "Running update_overdue_loans at 2025-03-06 17:00:54", "module": "loans", "function": "update_overdue_loans", "line": 692, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,004", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cpayment_due_date%2Cclient_id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance&status=eq.active&payment_due_date=lt.2025-03-06T17%3A00%3A54.794642 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,007", "level": "INFO", "logger": "root", "message": "Found 1 potentially overdue loans", "module": "loans", "function": "update_overdue_loans", "line": 713, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,205", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=payment_date%2Camount&loan_id=eq.4ac76296-f59f-460c-8255-e78a0f9452b1&payment_date=gte.2025-03-01T00%3A00%3A00&payment_date=lte.2025-03-06T17%3A00%3A54.794642 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,208", "level": "INFO", "logger": "root", "message": "Skipping overdue status for loan 586 as sufficient payments (R 4300.00) were made this month (expected: R 2666.67)", "module": "loans", "function": "update_overdue_loans", "line": 779, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,208", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status, skipped 1 loans with sufficient payments, encountered 0 errors", "module": "loans", "function": "update_overdue_loans", "line": 831, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,209", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status", "module": "loans", "function": "main", "line": 506, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,399", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,401", "level": "INFO", "logger": "root", "message": "Found 2 loans in the database", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_loans_table", "record_count": 2}
{"timestamp": "2025-03-06 17:00:55,402", "level": "INFO", "logger": "root", "message": "Today is not the 22nd day of the month. Use --test to run anyway. Exiting.", "module": "loans", "function": "main", "line": 554, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,404", "level": "INFO", "logger": "root", "message": "Loan payment notification process completed at 2025-03-06 17:00:55", "module": "loans", "function": "main", "line": 675, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,405", "level": "INFO", "logger": "root", "message": "Total execution time: 0.80 seconds", "module": "loans", "function": "main", "line": 676, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,406", "level": "INFO", "logger": "root", "message": "Summary: 0 loans processed, 0 successful notifications, 0 loans marked as overdue, 0 penalties applied", "module": "loans", "function": "main", "line": 677, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:00:55,407", "level": "INFO", "logger": "root", "message": "Reminders: 0 payment reminders, 0 due date reminders, 0 overdue notifications", "module": "loans", "function": "main", "line": 678, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "490fa5ba-be6c-4060-838a-fda73be7c713", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:02,272", "level": "INFO", "logger": "root", "message": "Structured logging initialized", "module": "loans", "function": "setup_logging", "line": 110, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:02,640", "level": "INFO", "logger": "root", "message": "Performing initial database connection check...", "module": "loans", "function": "run_cli", "line": 1423, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:03,216", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:03,224", "level": "INFO", "logger": "root", "message": "Database connection test successful. Found 2 loans.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loans", "record_count": 2}
{"timestamp": "2025-03-06 17:02:03,428", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/clients?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:03,431", "level": "INFO", "logger": "root", "message": "Clients table accessible. Found 1047 clients.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "clients", "record_count": 1047}
{"timestamp": "2025-03-06 17:02:03,631", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:03,633", "level": "INFO", "logger": "root", "message": "Loan payments table accessible. Found 2 payment records.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "loan_payments", "record_count": 2}
{"timestamp": "2025-03-06 17:02:03,836", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/gun_licences?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:03,838", "level": "INFO", "logger": "root", "message": "Gun licences table accessible. Found 367 licence records.", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_database_connection", "table": "gun_licences", "record_count": 367}
{"timestamp": "2025-03-06 17:02:03,839", "level": "INFO", "logger": "root", "message": "Starting loan payment notification process at 2025-03-06 17:02:03", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "main", "test_mode": true, "send_emails": true, "send_admin_summary": false, "start_time": "2025-03-06T17:02:03.839747"}
{"timestamp": "2025-03-06 17:02:04,045", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,048", "level": "INFO", "logger": "root", "message": "Supabase connection test successful", "module": "loans", "function": "main", "line": 498, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,049", "level": "INFO", "logger": "root", "message": "Running update_overdue_loans at 2025-03-06 17:02:04", "module": "loans", "function": "update_overdue_loans", "line": 692, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,248", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cpayment_due_date%2Cclient_id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance&status=eq.active&payment_due_date=lt.2025-03-06T17%3A02%3A04.049840 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,250", "level": "INFO", "logger": "root", "message": "Found 1 potentially overdue loans", "module": "loans", "function": "update_overdue_loans", "line": 713, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,450", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loan_payments?select=payment_date%2Camount&loan_id=eq.4ac76296-f59f-460c-8255-e78a0f9452b1&payment_date=gte.2025-03-01T00%3A00%3A00&payment_date=lte.2025-03-06T17%3A02%3A04.049840 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,453", "level": "INFO", "logger": "root", "message": "Skipping overdue status for loan 586 as sufficient payments (R 4300.00) were made this month (expected: R 2666.67)", "module": "loans", "function": "update_overdue_loans", "line": 779, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,455", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status, skipped 1 loans with sufficient payments, encountered 0 errors", "module": "loans", "function": "update_overdue_loans", "line": 831, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,456", "level": "INFO", "logger": "root", "message": "Updated 0 loans to overdue status", "module": "loans", "function": "main", "line": 506, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06T17:02:04.457508", "level": "INFO", "logger": "root", "message": "Running apply_penalties_to_overdue_loans at 2025-03-06 17:02:04", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "apply_penalties_to_overdue_loans", "bypass_date_check": true}
{"timestamp": "2025-03-06 17:02:04,662", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance%2Cpenalties%2Cclient_id%2Cpayment_due_date&status=eq.overdue \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,665", "level": "INFO", "logger": "root", "message": "Found 0 overdue loans to check for penalty application", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "apply_penalties_to_overdue_loans", "overdue_loans_count": 0}
{"timestamp": "2025-03-06 17:02:04,667", "level": "INFO", "logger": "root", "message": "No overdue loans found for penalty application", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "apply_penalties_to_overdue_loans", "overdue_loans_count": 0}
{"timestamp": "2025-03-06 17:02:04,668", "level": "INFO", "logger": "root", "message": "Applied penalties to 0 overdue loans, skipped 0 loans with sufficient payments", "module": "loans", "function": "main", "line": 515, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,669", "level": "INFO", "logger": "root", "message": "Running notify_overdue_loans at 2025-03-06 17:02:04", "module": "loans", "function": "notify_overdue_loans", "line": 851, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,886", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance%2Cinterest_rate%2Cpayment_due_date%2Cclient_id%2Cstatus%2Cstart_date%2Cweapon_cost%2Clicense_id%2Cpenalties&status=eq.overdue \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,889", "level": "INFO", "logger": "root", "message": "Found 0 overdue loans for notification", "module": "loans", "function": "notify_overdue_loans", "line": 870, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,890", "level": "INFO", "logger": "root", "message": "No overdue loans found", "module": "loans", "function": "notify_overdue_loans", "line": 873, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,891", "level": "INFO", "logger": "root", "message": "Sent 0 overdue notifications", "module": "loans", "function": "main", "line": 524, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,892", "level": "INFO", "logger": "root", "message": "Today is not the 22nd day of the month. Skipping payment reminders.", "module": "loans", "function": "send_payment_reminders", "line": 1519, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,893", "level": "INFO", "logger": "root", "message": "Sent 0 payment reminders", "module": "loans", "function": "main", "line": 533, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,895", "level": "INFO", "logger": "root", "message": "Today is not the 28th day of the month. Skipping due date reminders.", "module": "loans", "function": "send_due_date_reminders", "line": 1645, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:04,896", "level": "INFO", "logger": "root", "message": "Sent 0 due date reminders", "module": "loans", "function": "main", "line": 542, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,095", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=count&limit=1 \"HTTP/2 206 Partial Content\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,098", "level": "INFO", "logger": "root", "message": "Found 2 loans in the database", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "check_loans_table", "record_count": 2}
{"timestamp": "2025-03-06 17:02:05,306", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/loans?select=id%2Cinvoice_number%2Cloan_amount%2Cremaining_balance%2Cinterest_rate%2Cpayment_due_date%2Cclient_id%2Cstatus%2Cstart_date%2Cweapon_cost%2Clicense_id%2Cpenalties&status=eq.active&payment_due_date=gte.2025-04-01T00%3A00%3A00&payment_due_date=lte.2025-04-30T23%3A59%3A59 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,501", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/clients?select=id%2Cfirst_name%2Clast_name%2Cemail%2Cphone&id=eq.6b629e44-765e-4911-949c-717d12723324 \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,699", "level": "INFO", "logger": "httpx", "message": "HTTP Request: GET https://ybsarkhaayjzlgamlcry.supabase.co/rest/v1/gun_licences?select=make%2Ctype%2Ccaliber%2Cserial_number&id=eq.275298e0-0215-456b-b41b-3c6b07f2864e \"HTTP/2 200 OK\"", "module": "_client", "function": "_send_single_request", "line": 1025, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,702", "level": "INFO", "logger": "root", "message": "Found 1 loans with payments due next month", "module": "loans", "function": "main", "line": 567, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:05,703", "level": "INFO", "logger": "root", "message": "Preparing statement email for Clinton paul Marais (clintonmster@gmail.com)", "module": "loans", "function": "main", "line": 625, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:07,202", "level": "INFO", "logger": "root", "message": "Email sent to clintonmster@gmail.com", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "send_email", "recipient": "clintonmster@gmail.com", "subject": "[TEST] Gunnery Payment Due Quote: 7698", "email_size": 8070, "smtp_server": "mail.gunneryguns.com"}
{"timestamp": "2025-03-06 17:02:08,152", "level": "INFO", "logger": "root", "message": "Email sent to acum3n@protonmail.com", "module": "loans", "function": "log_with_context", "line": 102, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}, "operation": "send_email", "recipient": "acum3n@protonmail.com", "subject": "COPY: [TEST] Gunnery Payment Due Quote: 7698", "email_size": 8070, "smtp_server": "mail.gunneryguns.com"}
{"timestamp": "2025-03-06 17:02:09,153", "level": "INFO", "logger": "root", "message": "Processed 1 loans with 1 successful notifications", "module": "loans", "function": "main", "line": 655, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:09,155", "level": "INFO", "logger": "root", "message": "Sent 0 payment reminders and 0 due date reminders", "module": "loans", "function": "main", "line": 656, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:09,156", "level": "INFO", "logger": "root", "message": "Loan payment notification process completed at 2025-03-06 17:02:09", "module": "loans", "function": "main", "line": 675, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:09,157", "level": "INFO", "logger": "root", "message": "Total execution time: 5.32 seconds", "module": "loans", "function": "main", "line": 676, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:09,159", "level": "INFO", "logger": "root", "message": "Summary: 1 loans processed, 1 successful notifications, 0 loans marked as overdue, 0 penalties applied", "module": "loans", "function": "main", "line": 677, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
{"timestamp": "2025-03-06 17:02:09,160", "level": "INFO", "logger": "root", "message": "Reminders: 0 payment reminders, 0 due date reminders, 0 overdue notifications", "module": "loans", "function": "main", "line": 678, "hostname": "Sheldon", "app": "loan_management_system", "session_id": "03351696-c0a8-4219-8132-224222d5f729", "platform": {"system": "Windows", "release": "11", "version": "10.0.26100", "python": "3.13.2 (tags/v3.13.2:4f8bb39, Feb  4 2025, 15:23:48) [MSC v.1942 64 bit (AMD64)]"}}
